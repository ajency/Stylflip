var Utils = {};

Utils._ = require('/libs/UnderscoreUtils')._;

var _loginEmail = "", _loginPass = "";

var _rateAppCalled = false;
Utils.rateApp = function(){
	if(_rateAppCalled) return;
	// var now = ( new Date().getTime() ) / 1000;
	var rateApp = Ti.App.Properties.getString('rateApp','');
	// if(!timeToRate){
	// 	timeToRate = now + ( 24 * 60 * 60 );
	// 	Ti.App.Properties.setString('timeToRate',timeToRate);
	// }
	// else 
		if(rateApp === '' && launchCount > constant.RATEAPPLIMIT ){
			var alertDialog = UI.createAlertDialog({
				title: 'rate app',
				titleColor: '#ef4e6d',
				message: 'Please take some time to rate our app',
				buttonNames: ['Ignore', 'Rate Now']
			});

			alertDialog.addEventListener('click', function(e){
				if(e.status === 'accept'){
					if(osname === 'android'){
						Ti.Platform.openURL('https://play.google.com/store/apps/details?id=com.under1r.StylFlip');
					}
					else{
						Ti.Platform.openURL('https://itunes.apple.com/in/app/stylflip/id1072334629?mt=8');
					}

					Ti.App.Properties.setString('rateApp','rate_complete');
				}
				// else{
					
				// }
		});

		alertDialog.show();
		alertDialog = null;
	}
	_rateAppCalled = true;
}; //end rateApp

Utils.trackScreen = function(screen){
	var userid = Ti.App.Properties.getString('userId','');
	var trkStr = 'viewed', data = {};

	if(screen && typeof screen === 'string'){
		if(screen.indexOf('sell') !== -1 || screen.indexOf('stylefile') !== -1){
			trkStr = 'clicked'
		}

		trkStr = trkStr + '.' + screen.toLowerCase();
	}

	data.userid = userid ? userid : 'na';
	
	
	// for(var iz in data){
	// 	Ti.API.info(constant.APP + " key: [" + iz + "] value: [" + data[iz] + "]");
	// }

	if(osname === 'android'){
		trkStr = osname + '.' + trkStr;
	}
	else{
		trkStr = 'ios.' + trkStr;
	}

	Ti.API.info(constant.APP + " @@@@@@@@@@@@@@@@@@@@@@@@@@ trackScreen: [" + trkStr + "] @@@@@@@@@@@@@@@@@@@@@@@@");
	Titanium.Analytics.featureEvent(trkStr,data);

};

Utils.trackEvent = function(event){
	var userid = Ti.App.Properties.getString('userId',''), data = {}, trkStr = 'event.';

	data.userid = userid ? userid : 'na';

	if(event && typeof event === 'string'){
		trkStr = trkStr + event;

		if(osname === 'android'){
			trkStr = 'android.' + trkStr;
		}
		else{
			trkStr = 'ios.' + trkStr;
		}

		Ti.API.info(constant.APP + " @@@@@@@@@@@@@@@@@@@@@@@@@@ trackEvent: [" + trkStr + "] @@@@@@@@@@@@@@@@@@@@@@@@");
		Titanium.Analytics.featureEvent(trkStr,data);
	} 
}

Utils.trackNotification = function(nPayload){

	if(nPayload.source !== 'acs') return;
	
	var itemId = '', screen = '', trackStr = 'notification.tap', userId = Utils.loggedInUserId();

	if(nPayload.screen){
		screen = nPayload.screen.toString().toLowerCase();
		trackStr += ('.' + screen);
	}

	var data = {};

	if(userId){
		data.userid = userId;
	}

	if(nPayload.itemId){
		data.itemid = nPayload.itemId;
	}

	if(osname === 'android'){
		trackStr = 'android.' + trackStr;
	}
	else{
		trackStr = 'ios.' + trackStr;
	}

	Ti.API.info(constant.APP + " #################### trackNotification: [" + trackStr + "] #########################");
	Titanium.Analytics.featureEvent(trackStr,data);

};

Utils.setLoginCreds = function(email,password){
	_loginEmail = email,
	_loginPass = password;
	Ti.API.info(constant.APP + " $$$$$$$$$$$$$$$$$$$$$$$$$$ LOGIN CREDENTIALS SET #########################");
};

Utils.getLoginCreds = function(){
	return {
		email: _loginEmail,
		password: _loginPass
	}
};

Utils.formatPhoneNumber = function(phoneNumber) {
    var _formattedPhoneNumber = '';
    var _numbers = phoneNumber.replace(/\D/g, '');
    var chars = { 0: '(', 3: ') ', 6: ' - ' };
    
    for (var i = 0; i < _numbers.length; i++) {
        _formattedPhoneNumber += (chars[i] || '') + _numbers[i];
    }
    
    return _formattedPhoneNumber;
};

Utils.stripHTMLTags = function(str) {
	if(str) {
		return str.replace(/<(?:.|\n)*?>/gm, '');
	}
	return str;
};

Utils.toFirstUppercase = function(str) {
	if(str == 'StylFlip' || str == 'FAQ\'s' || str == 'and') {
		return str;
	}
	return str.charAt(0).toUpperCase() + str.substr(1, str.length).toLowerCase();
};

Utils.toEachWordUppercase = function(str) {
	var words = str.split(' ');
	var arr = [];
	for(var i = 0; i<words.length; i++) {
		words[i] = words[i].toLowerCase() == 'of' ? words[i].toLowerCase() : Utils.toFirstUppercase(words[i]);
	}
	return words.join(' ');
};

Utils.getPendingData = function() {
	if(Ti.App.Properties.hasProperty('pendingData')) {
		var _data = Ti.App.Properties.getObject('pendingData');
		Ti.App.Properties.removeProperty('pendingData');
		return _data;
	}
	return false;
};


Utils.getShortOrderStatus = function(status) {
	var _shortStatus;
	switch(status) {
		case 'Processing':
			_shortStatus = 'Processing';
			_shortStatus = 'Processing';
		break;
		case 'Shipped by seller':
			_shortStatus = 'Ship\'d by Slr';
			_shortStatus = status;
		break;
		case 'Under QA':
			_shortStatus = 'Under QA';
			_shortStatus = status;
		break;
		case 'Shipped to buyer':
			_shortStatus = 'Ship\'d to Byr';
			_shortStatus = status;
		break;
		case 'Complete':
			_shortStatus = 'Complete';
			_shortStatus = status;
		break;
		case 'Rejected by StylFlip':
			_shortStatus = 'Rjct\'d by â€‹SF';
			_shortStatus = 'Rejected by SF';
		break;
		case 'Returned by buyer':
			_shortStatus = 'Rtrn\'d by Byr';
			_shortStatus = status;
		break;
		case 'Delievered':
			_shortStatus = 'Delivered';
		break;
		case 'Cancelled':
			_shortStatus = status;		 
	}
	return _shortStatus;
};


Utils.getBoolean = function(value) {
	return value=='1'||value==1||value==true?true:false;
};


Utils.isValidEmail = function(emailId){
    var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return reg.test(emailId);
};

Utils.isValidUsername = function(username){
    var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))$/;
    return reg.test(username);
};

Utils.isValidIFSC = function(IFSCCode) {
    var reg = /[A-Z|a-z]{4}[\d]{7}$/;
    return reg.test(IFSCCode);
};

Utils.isValidPincodeForCOD = function(pincode) {
	var pincodes = [110001,110002,110003,110004,110005,110006,110007,110008,110009,110010,110011,110012,110013,110014,110015,110016,110017,110018,110019,110020,110021,110022,110023,110024,110025,110026,110027,110028,110029,110030,110031,110032,110033,110034,110035,110036,110037,110038,110039,110040,110041,110042,110043,110044,110045,110046,110047,110048,110049,110050,110051,110052,110053,110054,110055,110056,110057,110058,110059,110060,110061,110062,110063,110064,110065,110066,110067,110068,110069,110070,110071,110072,110073,110074,110075,110076,110077,110078,110080,110081,110082,110083,110084,110085,110086,110087,110088,110089,110090,110091,110092,110093,110094,110095,110096,110101,110103,110104,110105,110106,110107,110108,110109,110110,110112,110113,110114,110115,110116,110117,110118,110119,110120,110122,110124,110125,110301,110302,110501,110503,110504,110510,110511,110512,110601,110602,110603,110604,110605,110606,110607,110608,110609,121001,121002,121003,121004,121005,121006,121007,122001,122002,122003,122004,122005,122006,122007,122008,122009,122010,122011,122012,122015,122016,122017,122018,122050,122051,122101,122102,122103,122105,122413,123413,124001,124021,124022,124102,124103,124104,124105,124106,124107,124108,124109,124111,124112,124113,124142,124146,124201,124202,124303,124401,124404,124406,124411,124412,124501,124504,124505,124506,124507,124513,124514,132101,132102,132103,132104,132105,132106,132107,132108,132110,132113,132115,132122,132140,132145,132151,133001,133006,133101,133301,134003,134007,134101,134103,134104,134107,134108,134109,134112,134113,134114,134115,134116,134118,134205,141001,141002,141003,141004,141005,141006,141007,141008,141009,141010,141011,141012,141013,141014,141016,143001,143002,143003,143004,143005,143006,143022,143104,143105,144001,144002,144003,144004,144005,144006,144007,144008,144009,144010,144011,144012,144013,144014,144021,144022,144023,144027,144403,144601,147001,147002,147003,147004,147005,147021,160001,160002,160003,160004,160008,160009,160010,160011,160012,160014,160015,160016,160017,160018,160019,160020,160022,160023,160025,160026,160030,160031,160032,160034,160035,160036,160039,160040,160046,160047,160048,160101,160102,160106,173203,180001,180002,180003,180004,180005,180006,180007,180010,180011,180012,180013,180016,181121,181133,247664,247665,247666,247667,248001,248002,248003,248004,248005,248006,248007,248008,248009,248011,248012,248110,248121,248171,248195,248197,249401,249402,249403,249404,249405,249407,263153,302001,302002,302003,302004,302005,302006,302007,302008,302009,302010,302011,302012,302013,302015,302016,302017,302018,302019,302020,302021,302022,302023,302026,302029,302033,302039,311001,313001,313002,313003,313004,324001,324002,324003,324004,324005,324006,324007,324008,324009,324010,333333,342001,342002,342003,342004,342005,342006,342007,342008,342009,342010,342011,342012,360001,360002,360003,360004,360005,360006,360007,360008,360009,360021,360024,360480,360510,360515,360520,360530,360531,360540,360545,360550,360560,360570,360575,360576,360577,360578,360579,360590,361001,361002,361003,361004,361005,361006,361007,361008,361009,361010,361011,361012,361013,361110,361120,361130,361140,361141,361142,361150,361160,361162,361170,361210,361220,361230,361240,361250,361280,361305,361306,361310,361315,361320,361325,361330,361335,361345,361347,361350,362001,362030,362650,363655,364001,364002,364003,364004,364005,364006,364050,364060,364270,364290,370001,370002,370015,370020,370030,370040,370105,370110,370130,370135,370140,370145,370150,370155,370160,370165,370201,370203,370205,370210,370230,370240,370405,370410,370415,370421,370425,370427,370430,370435,370450,370455,370460,370475,370485,370490,370510,370511,370601,370602,370605,370610,370615,370620,370625,370627,370630,370640,370645,370650,370655,370660,370665,370670,370675,380001,380002,380003,380004,380005,380006,380007,380008,380009,380010,380012,380013,380014,380015,380016,380018,380019,380021,380022,380023,380024,380025,380026,380027,380028,380050,380051,380052,380053,380054,380055,380057,380058,380059,380060,380061,380063,380152,382000,382001,382002,382003,382004,382005,382006,382007,382008,382009,382010,382011,382012,382013,382014,382015,382016,382017,382018,382019,382020,382021,382022,382023,382024,382025,382026,382027,382028,382029,382030,382041,382042,382044,382045,382051,382110,382170,382210,382211,382213,382220,382315,382325,382330,382340,382345,382346,382350,382352,382405,382410,382415,382418,382421,382422,382423,382424,382425,382426,382427,382428,382430,382440,382443,382445,382449,382470,382475,382480,382481,382715,382721,382725,382729,382740,388001,388110,388120,388121,389330,389350,390001,390002,390003,390004,390005,390006,390007,390008,390009,390010,390011,390012,390013,390014,390015,390016,390017,390018,390019,390020,390021,390022,390023,390024,390025,391243,391310,391320,391330,391340,391345,391346,391347,391350,391410,391430,391440,391740,391750,391760,391770,391775,392001,392002,392011,392012,392015,392130,393001,393002,393010,393110,393145,394116,394210,394220,394221,394230,394270,394510,394515,394518,394520,394601,395001,395002,395003,395004,395005,395006,395007,395008,395009,395010,395023,396001,396020,396035,396105,396170,396171,396185,396191,396193,396195,396196,396197,396200,396209,396210,396211,396220,396230,396321,396325,396350,396421,396424,396427,396445,396460,396510,396521,400001,400002,400003,400004,400005,400006,400007,400008,400009,400010,400011,400012,400013,400014,400015,400016,400017,400018,400019,400020,400021,400022,400023,400024,400025,400026,400027,400028,400029,400030,400031,400032,400033,400034,400035,400036,400037,400038,400039,400040,400042,400043,400046,400049,400050,400051,400052,400053,400054,400055,400056,400057,400058,400059,400060,400061,400062,400063,400064,400065,400066,400067,400068,400069,400070,400071,400072,400074,400075,400076,400077,400078,400079,400080,400081,400082,400083,400084,400085,400086,400087,400088,400089,400090,400091,400092,400093,400094,400095,400096,400097,400098,400099,400101,400102,400103,400104,400105,400601,400602,400603,400604,400605,400606,400607,400608,400609,400610,400611,400612,400613,400614,400615,400701,400702,400703,400704,400705,400706,400707,400708,400709,400710,401101,401102,401103,401104,401105,401106,401107,401201,401202,401203,401204,401205,401206,401207,401208,401209,401210,401301,401302,401303,401304,401305,401401,401402,401403,401404,401405,401501,401502,401503,401504,401506,401601,401602,401603,401604,401605,401606,401607,401608,401609,401610,401701,401702,401703,402101,402103,402104,402105,402106,402107,402108,402109,402110,402111,402117,402201,402202,402203,402302,402303,403001,403002,403003,403004,403005,403006,403101,403104,403106,403107,403108,403109,403110,403114,403115,403201,403202,403203,403204,403206,403401,403402,403404,403405,403406,403407,403409,403410,403501,403502,403504,403505,403507,403508,403509,403510,403511,403513,403515,403516,403517,403521,403523,403526,403530,403601,403602,403701,403707,403708,403709,403710,403711,403712,403713,403714,403715,403716,403717,403718,403719,403720,403721,403722,403724,403725,403726,403731,403801,403802,403803,403804,403806,410101,410200,410201,410202,410203,410204,410206,410207,410208,410209,410210,410216,410217,410218,410220,410221,410222,410507,410613,411000,411001,411002,411003,411004,411005,411006,411007,411008,411009,411011,411012,411013,411014,411015,411016,411017,411018,411019,411020,411021,411022,411023,411026,411027,411028,411030,411031,411032,411033,411034,411035,411036,411037,411038,411039,411040,411041,411042,411043,411044,411045,411046,411047,411048,411052,411057,412000,412001,412207,412208,412209,412210,412216,412217,412219,412220,412308,413736,414001,414002,414003,414004,414005,414111,416001,416002,416003,416004,416005,416006,416007,416008,416010,416012,416119,416121,416122,416234,421001,421002,421003,421004,421005,421032,421101,421102,421103,421201,421202,421203,421204,421300,421301,421302,421303,421304,421305,421306,421307,421308,421311,421312,421401,421402,421403,421501,421502,421503,421505,421506,421601,421602,421603,421605,422001,422002,422003,422004,422005,422006,422007,422008,422009,422010,422011,422012,422013,422101,422102,422103,422105,422203,422212,422213,422221,422401,422501,431001,431002,431003,431004,431005,431006,431010,431105,431107,431133,431136,440001,440002,440003,440004,440005,440006,440007,440008,440009,440010,440011,440012,440013,440014,440015,440016,440017,440018,440019,440020,440021,440022,440023,440024,440025,440026,440027,440028,440029,440030,440032,440033,440034,440035,440036,441108,441122,441501,444445,454545,490001,490006,490009,490010,490011,490012,490013,490020,490021,490022,490023,490024,490025,490026,490027,490036,490042,491001,491002,491107,491111,491221,491222,491223,491225,491226,491227,491228,492001,492002,492003,492004,492005,492006,492007,492008,492009,492010,492011,492012,492013,492015,492099,493221,500001,500002,500003,500004,500005,500006,500007,500008,500009,500010,500011,500012,500013,500014,500015,500016,500017,500018,500019,500020,500021,500022,500023,500024,500025,500026,500027,500028,500029,500030,500031,500032,500033,500034,500035,500036,500037,500038,500039,500040,500041,500042,500043,500044,500045,500046,500047,500048,500049,500050,500051,500052,500053,500054,500055,500056,500057,500058,500059,500060,500061,500062,500063,500064,500065,500066,500067,500068,500069,500070,500071,500072,500073,500074,500075,500076,500077,500078,500079,500080,500081,500082,500083,500084,500085,500086,500087,500088,500089,500090,500091,500092,500093,500094,500095,500096,500097,500098,500123,500409,500482,500762,501401,501505,507001,507002,507003,507004,507101,507103,507111,507113,507114,507115,507116,507117,507118,507119,507120,507121,507122,507123,507124,507125,507126,507128,507129,507130,507133,507134,507135,507136,507137,507138,507140,507154,507157,507158,507159,507160,507161,507163,507164,507165,507166,507167,507168,507169,507170,507182,507183,507201,507202,507203,507204,507208,507209,507210,507211,507301,507302,507303,507304,507305,507306,507316,507318,560001,560002,560003,560004,560005,560006,560007,560008,560009,560010,560011,560012,560013,560014,560015,560016,560017,560018,560019,560020,560021,560022,560023,560024,560025,560026,560027,560028,560029,560030,560031,560032,560033,560034,560035,560036,560037,560038,560039,560040,560041,560042,560043,560044,560045,560046,560047,560048,560049,560050,560051,560052,560053,560054,560055,560056,560057,560058,560059,560060,560061,560062,560063,560064,560065,560066,560067,560068,560069,560070,560071,560072,560073,560074,560075,560076,560077,560078,560079,560080,560081,560082,560083,560084,560085,560086,560087,560088,560089,560090,560091,560092,560093,560094,560095,560096,560097,560098,560099,560100,560102,560103,560104,560105,560106,560300,560999,561203,561204,561229,562106,562107,562110,562123,562125,562128,562149,562157,562158,562159,565657,565658,570001,570002,570003,570004,570005,570006,570007,570008,570009,570010,570011,570012,570013,570014,570015,570016,570017,570018,570019,570020,570021,570022,570023,570024,570025,570026,570027,570028,571130,571156,571186,571301,571302,571325,573114,575001,575002,575003,575004,575005,575006,575007,575008,575009,575010,575011,575012,575013,575014,575015,575016,575017,575018,575019,575020,575021,575022,575023,575025,575026,575028,575029,575030,580001,580002,580003,580004,580005,580006,580007,580008,580009,580011,580020,580021,580023,580024,580025,580026,580028,580029,580030,580031,580032,580114,590001,590003,590005,590006,590008,590009,590010,590011,590014,590015,590016,591108,591113,600001,600002,600003,600004,600005,600006,600007,600008,600009,600010,600011,600012,600013,600014,600015,600016,600017,600018,600019,600020,600021,600022,600023,600024,600025,600026,600027,600028,600029,600030,600031,600032,600033,600034,600035,600036,600037,600038,600039,600040,600041,600042,600043,600044,600045,600046,600047,600048,600049,600050,600051,600052,600053,600054,600055,600056,600057,600058,600059,600060,600061,600062,600063,600064,600065,600066,600067,600068,600069,600070,600071,600072,600073,600074,600075,600076,600077,600078,600079,600080,600081,600082,600083,600084,600085,600086,600087,600088,600089,600090,600091,600092,600093,600094,600095,600096,600097,600098,600099,600100,600101,600102,600103,600104,600105,600106,600107,600108,600109,600110,600111,600112,600113,600114,600115,600116,600117,600118,600119,600120,600122,600124,600125,600126,601201,601203,601204,601206,601301,601302,602101,602103,602104,602105,602106,602107,602117,603002,603102,603103,603202,603203,603204,603209,603210,620001,620002,620003,620004,620005,620006,620007,620008,620009,620010,620011,620012,620013,620014,620015,620016,620017,620018,620019,620020,620021,620022,620023,620024,620025,620026,624001,624002,624003,624004,624005,625001,625002,625003,625004,625005,625006,625007,625008,625009,625010,625011,625012,625013,625014,625015,625016,625017,625018,625019,625020,625021,625022,625023,625104,625106,625107,625122,625402,625513,625531,625532,625533,625534,625706,626001,626002,626003,626102,626108,626117,626118,626123,626124,626139,626160,626188,626189,627001,627002,627003,627004,627005,627006,627007,627008,627009,627010,627011,627012,627401,627414,627422,627425,628001,628002,628003,628004,628005,628006,628007,628008,628101,628102,628501,628502,629001,629002,629003,629004,629251,629701,629702,629703,629704,631208,631604,635001,635002,635101,635102,635103,635104,635105,635106,635107,635108,635109,635110,635111,635112,635113,635114,635115,635116,635117,635118,635119,635120,635121,635122,635123,635124,635125,635126,636001,636002,636003,636004,636005,636006,636007,636008,636009,636010,636011,636012,636013,636014,636015,636016,636030,636201,636302,636308,637211,638001,638002,638003,638004,638005,638006,638007,638008,638009,638010,638011,638183,638301,638751,638752,638812,639001,639002,639003,639004,639005,639006,641001,641002,641003,641004,641005,641006,641007,641008,641009,641010,641011,641012,641013,641014,641015,641016,641017,641018,641019,641020,641021,641022,641023,641024,641025,641026,641027,641028,641029,641030,641031,641032,641033,641034,641035,641036,641037,641038,641039,641040,641041,641042,641043,641044,641045,641046,641047,641062,641103,641105,641107,641108,641109,641110,641111,641114,641201,641401,641402,641406,641407,641601,641602,641603,641604,641605,641606,641607,641608,641652,641654,641655,641659,641663,641664,641666,641668,641687,643101,643102,643103,643104,643105,643243,700001,700002,700003,700004,700005,700006,700007,700008,700009,700010,700011,700012,700013,700014,700015,700016,700017,700018,700019,700020,700021,700022,700023,700024,700025,700026,700027,700028,700029,700030,700031,700032,700033,700034,700035,700036,700037,700038,700039,700040,700041,700042,700043,700044,700045,700046,700047,700048,700049,700050,700051,700052,700053,700054,700055,700056,700057,700058,700059,700060,700061,700062,700063,700064,700065,700066,700067,700068,700069,700070,700071,700072,700073,700074,700075,700076,700077,700078,700079,700080,700081,700082,700083,700084,700085,700086,700087,700088,700089,700090,700091,700092,700093,700094,700095,700096,700097,700098,700099,700100,700101,700102,700103,700104,700105,700106,700107,700108,700156,711101,711102,711103,711104,711105,711106,711107,711108,711109,711302,711409,711411,734001,734002,734003,734004,734005,734006,734007,734008,734015,734401,734403,734404,734405,751001,751002,751003,751004,751005,751006,751007,751008,751009,751010,751011,751012,751013,751014,751015,751016,751017,751018,751019,751020,751021,751022,751023,751024,751025,751030,752101,753001,753002,753003,753004,753005,753007,753008,753009,753010,753011,753012,753013,753014,768001,768002,768003,781001,781003,781004,781005,781006,781007,781008,781009,781010,781011,781012,781013,781014,781015,781016,781017,781018,781019,781020,781021,781022,781023,781024,781025,781026,781027,781028,781029,781030,781031,781032,781033,781034,781035,781036,781037,781039,785001,785004,785005,785006,785007,785008,785009,785010,785013,785014,786001,786002,786003,786004,786005,786006,786007,786008,786125,786145,786146,786147,793001,793002,793003,793004,793005,800001,800002,800003,800004,800005,800006,800007,800008,800009,800010,800011,800012,800013,800014,800015,800016,800017,800018,800019,800020,800021,800022,800023,800024,800025,800026,812001,812002,812003,812004,812005,812006,812007,813210,826001,826003,826004,826005,826106,827001,827003,827004,827006,827009,827010,827011,827012,827013,827014,828106,828111,828127,828202,828301,831001,831002,831003,831004,831005,831006,831007,831009,831010,831011,831012,831013,831014,831015,831016,831017,831018,831019,831035,832108,832109,832110,834001,834002,834003,834004,834005,834006,834007,834008,834009,834010,834012,835103,835215,835222,121103,121107,127031,127309,131039,131101,131402,131403,132036,136020,136034,140109,140111,140112,140412,140802,141104,141105,141119,141202,141205,141422,141801,712235,712258,142049,143119,143410,143412,143415,143507,143512,143528,143533,144106,144404,144405,144407,144408,144418,144502,144510,144515,144516,144518,144521,144522,144526,144528,144529,144531,144532,145025,146024,146113,146114,147104,148021,148026,148103,148105,148106,148107,148109,151202,151212,152023,152031,152032,209214,212203,225001,225002,225003,225122,243701,247001,247002,247122,247670,250344,263149,263150,273152,281406,323001,360360,360380,360430,382260,383276,388365,388465,388580,388640,396115,396150,413224,415011,415015,415020,415501,415511,208018,302014,416304,416305,416417,425101,425102,425103,711401,122504,122505,401407,412115,416009,443001,444001,444505,453111,456661,457222,457441,492101,495009,495220,495223,495447,495454,495555,495678,506142,506310,506330,506371,516163,517124,517132,517167,517403,517419,518218,518452,521102,521130,521150,521158,521331,523182,524305,524311,524314,524316,533293,534432,535005,571102,571104,571107,573212,574102,574104,574110,574114,574122,574129,574144,574197,574198,574199,574213,574216,574225,574226,574227,574239,574240,574243,574248,574267,574314,574327,574509,576117,577111,581320,581354,581421,583215,583233,584170,602022,602027,603101,603105,603107,603108,603110,603314,603405,604402,604410,604601,605202,606702,606707,606752,606753,606755,606802,606804,606806,607101,607203,607205,608303,608501,609306,609308,609702,609802,609803,609804,609810,612107,612108,612202,612504,612601,612904,614201,614202,614203,614204,614207,614210,614211,614302,614904,624054,624210,624306,624316,624702,624708,624803,626103,626127,626144,627358,627359,627453,627604,628103,628105,629174,629175,629202,629203,629252,629802,631051,631204,631603,631606,632105,632201,632203,632402,632405,632504,632506,632507,632508,632512,632516,632517,632519,632520,632521,636103,636122,636203,636301,636304,636309,636455,636502,637013,637015,637018,637021,637209,637210,637214,637304,638101,638327,638455,643001,643002,643003,643004,670001,670002,670003,670004,670005,670006,670007,670008,670010,670011,670012,670013,670014,670017,670018,670331,670594,670621,671121,671122,671123,671124,671317,673001,673002,673003,673004,673005,673006,673007,673008,673009,673010,673011,673012,673014,673016,673017,673018,673019,673020,673021,673029,673032,673303,673317,673570,673571,673611,673633,676101,676103,676105,676106,676107,676109,676307,676502,676561,678003,678006,678010,678011,678014,678101,678102,678103,678104,678501,678502,678503,678504,678505,678506,678531,678532,678534,678541,678542,678546,678551,678552,678553,678555,678556,678557,678571,678572,678573,678592,678594,678596,678611,678612,678613,678621,678622,678623,678624,678631,678651,678671,678681,678702,678722,678731,678732,711111,711307,711309,711310,711313,711404,712304,712310,712409,712411,712502,712503,712702,712704,712705,713207,713211,713333,713334,713371,734123,737101,737102,743221,743222,743233,743234,743248,752014,752104,761009,761028,761054,761100,770031,781104,781124,781301,781303,781309,781314,781334,781335,781337,781339,781341,781348,781351,781353,781354,781365,781370,782001,782002,783101,783120,783121,783380,783381,783382,783385,784001,785640,786010,786012,786126,786171,786191,786602,787001,787031,787051,787052,791111,791113,828103,828107,828115,828126,828131,835238,835303,530021,530023,641048,462018,462011,462024,462027,462031,520009,520014,520005,520006,520001,520002,520003,520004,520008,520011,520012,520013,520015,110502,110505,462019,462028,462006,462012,462015,400202,500594,500873,500380,400047,342304,141017,143021,143036,143008,143009,143010,143106,147103,144411,577501,202121,202136,202140,482001,482003,482005,482007,482008,482009,482010,456010,482006,456004,456005,456007,456008,456009,396236,396194,403808,638108,638102,613003,613010,639136,585101,585102,585103,585104,585105,131028,131001,131024,576102,576103,576105,576106,576107,576108,632006,632007,632014,305008,305009,305001,305002,305003,305004,305005,305006,305007,522509,522019,250105,143101,303101,141015,131021,131027,226019,227101,249409,302024,302027,302028,613204,613104,613402,613403,530016,530017,574143,521225,530046,500178,500361,500252,500264,500267,574105,585106,585401,585402,585403,533101,533102,533103,533104,533105,533107,580010,580022,580027,624414,630611,638054,638055,638058,630101,638115,638116,638153,638154,638312,637207,638151,639109,639117,639205,639207,641670,641665,571311,562111,834011,590002,590007,590018,226303,226302,501218,384002,384003,384011,384205,384212,384310,384410,384435,638113,638182,639111,639113,346002,346003,346004,346005,346050,346110,346240,122000,388355,388320,388370,388350,388330,388360,388305,387315,388205,388307,388335,388306,388440,388310,387220,387240,700111,700109,700113,147201,530001,530002,530003,530004,530013,530020,530022,530024,530035,303902,151002,151004,333026,333029,333031,828110,828112,828113,828114,828119,828122,828123,828129,828302,828116,828120,828135,133005,133004,133104,133007,682003,263154,486001,486005,493890,522010,607006,530007,530008,530015,530018,530027,530028,530029,455002,700112,760001,760002,760003,760004,760005,760006,760009,761001,711202,412114,462013,462022,462043,462045,452001,452016,452018,453771,125001,574203,583201,455001,250002,250003,250004,250005,416216,226001,631561,631503,396235,403705,574219,711112,583211,134002,133207,411056,506002,577003,171002,171006,171009,141114,142026,141421,335001,335002,431601,431602,431603,431604,431605,431606,781128,202122,769042,770034,607004,607003,607002,607001,754025,754021,403703,403706,403503,403512,403514,281104,147301,247661,846007,576101,576104,571401,800027,682002,682004,682005,682007,682009,682013,682011,682015,682016,682017,682019,682024,682025,682026,682028,682030,682031,682032,682035,682036,682037,682038,769001,769004,769007,769012,769015,769010,769011,769016,769002,769003,769005,769006,769008,769009,769013,769014,201302,394516,607005,641112,828101,530026,575024,575152,575159,400901,201003,249201,574154,574173,574180,793007,793006,752001,752002,752003,713301,713302,713303,444602,416406,136119,711227,712233,123003,122503,403704,394140,394310,392020,392030,392240,396110,396310,396360,396370,396380,396409,396430,396530,364710,389151,389152,389160,389180,396215,389001,389340,360311,383001,383010,383030,383210,360370,360375,521456,530047,531173,712201,712202,712203,712204,712221,712222,712205,605401,605103,605108,828108,828132,416410,136026,135003,135002,384170,700153,394325,226026,226029,384160,384120,846006,846001,846002,602108,631402,605203,605652,605601,631502,631501,607402,282002,282003,282004,282005,282009,282001,211001,211002,211003,211009,273006,273008,273010,208021,281006,250103,244103,203207,221008,560242,603048,641065,641064,641049,624009,624007,624008,624010,638012,522035,522016,522034,522022,500195,639206,625105,625502,574115,570029,576001,635803,632106,632209,632202,632114,632052,632053,605302,605402,605105,605301,506370,506015,152116,148101,143505,143419,148024,151203,152002,152001,152101,143521,143531,146001,144208,146105,142033,151204,148023,152107,142001,152026,144514,144505,144527,144517,145001,145023,143534,145024,146104,144409,144504,140401,140601,151103,151101,148001,148028,143401,143301,305023,305024,305025,305012,301030,134005,143502,143007,243124,248201,249202,201000,147203,283126,209217,735132,735121,732001,125055,125060,125076,127021,127111,127025,127201,127022,126114,638056,638057,638112,362570,362560,391244,403529,403105,403520,456001,441001,441002,360022,388540,602001,631210,602002,641658,638211,632204,572102,700144,700145,600129,632001,632002,632003,632004,360410,362011,360405,360421,121102,752100,522503,522501,522502,522302,522237,522508,522306,522330,517502,517507,517504,521108,520007,520010,521151,521139,521153,521137,530040,530041,530043,503002,761003,761007,761025,171004,517506,517520,517101,517102,637002,631605,581301,581303,581304,581305,581306,581339,581352,202282,202128,411029,502302,502307,502319,583204,201300,700110,181205,181124,826015,201308,682006,682012,682018,682022,682023,334002,574258,583202,583203,501510,501301,560109,226011,226012,226301,226005,226008,226009,226014,226025,226023,226401,388340,712232,712248,522008,522013,503001,533106,533124,535003,535004,535217,535001,506010,506012,363030,396007,584103,440031,441111,410219,400401,400073,613501,700157,751031,751026,522001,522002,522003,522004,522005,522006,522007,522009,250403,250010,396002,602024,631551,605106,605107,743122,144801,144805,132114,125006,125033,414110,444607,415570,403102,608602,517128,517127,517125,382355,362003,400218,403408,391101,302034,506013,605110,132022,734101,734102,734103,734104,305901,144402,570030,753025,753021,283125,283107,201303,452056,452017,452019,452004,462001,462016,462032,462039,462042,462038,462003,462004,462044,384305,181123,122414,711322,721145,721304,639104,639105,607401,382465,394327,364240,388130,388345,121101,462002,462007,125004,125011,133302,134011,135101,135103,136033,136038,140108,140110,140113,140201,140306,140307,140308,140405,140407,140417,140507,140701,141107,141116,141122,141123,141201,141206,141411,141415,141416,141417,142011,142023,142024,142030,142035,142036,142037,142040,142043,142048,142052,142053,142054,142056,143026,143115,143406,143413,143506,143511,143516,143518,143519,143520,143525,143526,143529,143530,143532,144020,144029,144031,144032,144101,144105,144301,144302,144416,144417,144419,144421,144422,144501,144508,144509,144511,144512,144513,144533,144632,145029,145101,146021,146022,146023,146110,146111,148019,148020,148030,148034,151104,151111,151207,151208,151209,152003,152004,152112,152114,152115,171008,171010,171011,174103,180009,181008,181101,181132,181145,247656,248102,248161,123110,160052,455003,462017,483503,500100,532410,562160,577205,581308,590004,590013,590019,591181,600127,613401,624305,641408,700114,700115,700133,700134,711224,711402,753015,754012,518007,508002,678004,678007,462030,462010,462021,462023,452002,452007,452009,452012,452013,452014,453331,452003,452005,452006,452015,452008,452011,452010,201309,121008,603106,201305,411010,411053,123505,530009,144806,144602,144620,530005,530011,530012,530014,530031,530032,530044,571438,501203,501511,501512,248146,700136,700149,700150,700152,700154,151001,486003,485001,485005,462036,462026,462008,462041,562109,411054,506001,506003,506004,506005,506006,506007,506008,506009,506011,801105,801505,411050,411024,411025,411051,411049,411055,411060,412307,411061,682029,577001,577002,577004,577005,171001,171003,171005,828109,828105,828104,828130,201311,416013,141101,141102,142027,583104,583103,583102,583101,141120,141112,141109,600123,603001,603127,226010,431007,431009,781171,180015,781125,769043,608801,607105,607104,607102,607109,403729,403527,226201,281306,134204,121009,121106,121010,781038,209861,243126,221302,221202,221108,221107,221104,212212,342026,202138,202141,202142,211019,243202,243503,144802,144401,244504,244925,530048,531020,531021,531019,248179,713201,713202,713203,713204,713205,713206,713209,713212,713213,713214,713216,700120,700119,700121,700122,700123,574146,574150,574148,713304,713325,713326,712101,712102,712103,712104,712105,712123,712124,712125,712136,712137,712138,721101,721301,721302,721305,721306,576201,576221,576231,576225,576217,576230,576247,576211,576257,576283,576216,444601,444603,444604,444605,444606,415001,415002,415003,415004,425003,425001,425002,301019,573201,577201,577204,577222,562114,577101,605602,624307,624709,505001,524001,524002,524003,524004,524005,521001,518001,518002,518003,518004,518005,518006,533001,533002,533003,533004,533005,533006,516001,516002,516003,516004,517001,517002,517003,517004,515001,515002,515003,515004,515005,281001,281004,281003,281005,281121,332001,136027,135001,136118,123401,700116,700117,700118,516005,516006,521003,505002,624006,573202,301001,416436,416414,416415,416416,431008,413001,413002,413003,413004,413005,413006,413007,400041,711201,711203,711204,711205,122013,122014,713305,574145,574151,571511,571253,362002,362004,362015,362037,383315,383316,383317,363641,387001,387002,387130,387230,387320,387325,387350,387355,387360,387370,387375,387380,387430,387570,387710,388421,396406,396415,396418,396433,396436,396440,396450,396463,396466,396469,396472,396475,385001,384110,384255,384265,363001,363002,363020,363035,384140,384151,384215,384260,362255,362265,362266,362269,204101,204102,204105,226006,226007,226013,226020,226021,226022,226024,394105,394185,394540,395017,226003,226018,226501,226028,226015,226016,846003,846004,846009,632058,282006,282007,282008,282010,202001,202002,210010,211004,211005,211006,211007,211008,211010,211011,211012,211014,211016,211017,211018,212105,243002,243003,243005,243006,243122,243502,243501,201002,201001,201005,201006,201007,201010,201011,201013,201014,273001,273002,273003,273004,273005,273009,273012,273013,273014,273015,273412,201310,208001,208002,208003,208004,208005,208006,208007,208008,208009,208010,208011,208012,208013,208014,208015,208016,208017,208019,208020,208022,208023,208024,208025,208026,208027,226002,226004,226017,227305,227105,201307,201304,244901,221011,221210,221001,221002,221004,221005,221010,221103,221105,221106,221109,631552,574106,201301,203201,146102,141401,202150,202125,202127,249204,273011,453112,482011,144024,144025,144026,144041,144506,144507,144410,227106,141106,141402,141301,142022,141020,462046,281002,123101,305022,249205,835217,486002,485002,485003,485004,131029,313013,313022,313024,135004,136132,136131,421504,828121,735137,732101,732102,732103,450001,842001,842002,842003,842005,823001,823002,495002,495003,495005,495677,457001,825317,825319,825335,825302,825303,470001,470002,470003,470004,483501,201009,203202,700135,835205,127032,126102,126110,123001,123028,321001,306401,304001,335512,335513,333001,312001,534001,534005,534006,523001,509001,508001,532001,626004,626005,626125,606601,606604,606603,609602,609605,609601,609607,624101,612002,612501,612503,612101,612103,612104,612006,638052,638053,638051,642001,642002,642003,642004,642005,642006,642007,642101,642103,642104,642105,642109,642110,642120,632403,632401,632406,632515,632509,632404,584101,393020,394115,382225,385535,362520,362540,392220,392230,392310,362220,362222,362229,362227,391110,391105,391107,391115,391210,391761,370465,393140,393150,391121,394650,363622,365560,388225,360490,360460,360450,388620,365601,364515,608001,608002,403103,403506,403604,403531,403518,403519,801503,456003,456006,453441,474001,474003,474004,474006,474007,482002,482004,828124,831008,603308,603109,600128,641662,641667,641669,632104,605004,605005,605007,605009,605010,632059,639114,639007,639108,636307,632005,632012,632013,632055,632057,632011,632009,632054,636106,636140,636204,394315,388713,389310,389320,574222,522510,530045,531001,761020,760010,761002,760007,760008,517501,517503,517505,201204,625704,625501,625514,394101,394107,581302,581307,560125,243001,574201,574202,574220,491003,250001,201201,201206,202123,202280,202126,700124,700126,700127,574241,793022,151003,151005,132116,132117,132041,132037,132001,753132,753121,753127,735101,735102,711403,711405,250401,250342,250222,250110,250221,334003,342024,249408,249410,249411,263148,263143,263146,273017,273016,273209,603111,500484,500486,502032,502324,501507,500177,125021,431210,400048,411062,602021,602023,641061,637215,712245,712246,700159,521101,520016,530025,530006,530051,530049,754005,583123,583275,613001,613002,613004,613005,613006,613007,613008,613009,572101,572103,572104,572105,572106,572107,576115,576213,638104,396120,396126,639201,244001,605102,605111,639101,639115,495001,495004,495006,535002,639106,501323,793014,700148,700147,700146,639118,639116,143107,143422,263145,140406,136156,125005,125044,410303,441102,441109,302032,302025,605001,605002,605003,605008,605101,605011,605012,605013,605014,605006,151201,301707,334401,334006,753051,248122,248010,389360,743128,454775,391240,625701,625529,625702,625707,625527,281123,281202,281122,250501,637001,637003,637019,637212,637405,637409,637014,211013,143601,143501,342014,342013,334001,334004,342015,342027,574253,574231,574325,263152,793008,793017,734009,734010,734011,734012,734013,734014,363621,602003,132024,132023,500253,500265,500659,602025,160055,160056,160061,160062,134110,221003,221006,221007,221102,202124,204216,753006,384325,384315,384355,384335,384345,384320,474008,474015,474002,474005,474011,474020,477117,474009,474010,474012,574142,248160,248126,396180,140105,134102,134117,140101,140103,140603,160005,160006,160007,160013,160021,160024,160027,160028,160029,160033,160037,160038,160041,160042,160043,160044,160045,160049,160050,160051,160058,160059,160071,160073,160074,160079,140301,140413,140901,160103,134111,140001,711113,711114,143416,411058,273007,826006,147202,263142,244921,500000,500660,361101,401016,201012,602109,501504,632311,632102,632008,632010,181152,388315,388325,388545,388560,201004,201306,110097,201008,452020,110098,141412,146112,148022,180019,201102,248115,248141,249137,249203,249302,250205,250341,281204,281303,281305,281501,333035,360020,363110,365541,382321,382435,382610,382620,382630,382640,382650,382710,383220,384001,384225,385010,385210,385520,387115,387345,388170,388210,388215,388220,388230,388410,388460,388470,388630,391745,394150,394190,394305,394633,394651,394660,396030,396130,396135,396140,396155,396240,110102,110121,110401,110402,110403,110506,110507,110508,110509,121000,121012,121105,122019,122022,122052,122203,122204,122206,122207,122208,122209,122210,122211,122213,122214,122215,122216,122217,122218,122219,122220,122223,122224,122225,122226,122227,122228,122229,122230,122231,122232,122233,122234,122506,125002,125003,125056,132118,134119,134151,134152,141414,142021,160053,160054,160057,160060,160063,160064,160065,160066,160067,160068,160069,160070,160104,166031,180018,211015,221506,243004,248116,250013,334005,384012,387310,395011,395013,403403,403603,403723,412105,413255,416101,416306,416423,416425,453332,453446,455111,455115,456664,462040,462047,483053,483504,495450,495452,495682,495684,500605,503003,503186,503230,505415,505451,505469,505527,506166,508004,515701,515721,516162,516293,517131,517422,517551,517561,521002,521105,521131,521149,521156,521162,521228,521241,521366,522017,522236,522305,523002,524137,530037,532005,532401,532404,533125,534002,534003,534004,534007,534442,534450,534475,571402,571403,571404,572118,573217,574210,576222,577102,577202,577203,577502,581345,581360,583276,591124,600121,603112,605104,605109,605502,606611,606704,606805,607107,608102,608201,608302,608305,608401,608502,608601,609102,609307,609312,609603,609604,609606,609609,609703,612001,612102,612105,612204,612301,612302,612303,612401,612402,612602,612701,612702,612703,612804,613303,613601,614205,614208,620101,620102,621112,621216,621218,621601,624301,624302,624303,624701,624705,624707,624802,625201,625301,625708,626119,626128,626130,626137,626141,627201,627351,627352,627353,627356,627357,627451,627452,627759,629102,629180,629201,629204,629301,629302,629402,629403,629501,629502,629601,629602,629801,629809,629810,629852,629901,631203,631601,631701,631702,632501,632503,632513,637017,637020,637404,638107,638110,638316,639103,642114,642123,642134,700125,700129,700130,700131,700132,700143,700151,700155,711110,712139,712223,712234,712247,712249,712250,712311,713208,713210,713215,713341,743127,743144,752012,752013,754001,754006,761026,761045,761101,793011,801507,823003,823004,825301,828117,828133,828309,846008,523286,500890,522018,502325,521104,523211,523225,523262,523272,524346,530019,530030,531011,532185,532402,532408,532484,533296,533448,533462,534350,571405,571428,571446,571450,572216,573118,573128,573213,573218,573219,573220,574103,574118,574141,574259,574260,576114,576120,576122,576218,576226,576235,577117,577133,577229,583221,583225,583239,584102,584134,688009,688002,688010,688512,688567,688001,688011,688012,688013,688003,688006,688007,688014,688004,688008,344001,344035,345001,345002,678001,678002,678009,678012,678013,678707,688005,400000,682020,682014,682304,682301,683103,682309,682507,784010,695024,695023,695001,695035,695029,695037,695033,695036,695034,695009,695014,695040,695003,695099,695007,695010,695012,695018,695004,695002,695026,695021,695025,695008,695030,695006,695005,695019,695017,695038,695027,695011,695020,695015,785660,691010,691016,691021,691008,691011,691001,691006,691589,691020,691577,691002,691013,691019,691005,691009,691304,691015,691007,691012,691571,691022,691004,691303,691003,691014,671212,781040,132026,781122,680020,680001,680022,680021,680008,680011,680004,680002,680005,680003,680618,680010,680009,680655,680027,680006,680013,680026,680007,680611,680631,680553,680555,680651,680012,680545,690558,689121,688538,688541,688504,688529,686103,688501,688527,688540,688536,689574,688503,688525,688582,688537,688528,688531,678533,682504,682040,682042,682305,682306,682307,682312,682010,682506,695043,695016,695013,695588,695573,695581,695587,695032,695022,695522,226031,683108,683102,683571,683511,683110,683106,683101,768004,768005,768006,441904,441905,441906,441924];
	return pincodes.indexOf(parseInt(pincode)) > -1;
};

Utils.convertImageUrlToBlob = function(url) {
	var imageView = Ti.UI.createImageView({
		image: url
	});
	return imageView.toBlob();
};

Utils.isFBLoggedIn = function() {
	return Ti.App.Properties.hasProperty('fbLoggedIn')?true:false;
};

Utils.isUserLoggedIn = function() {
	// return true;
	return Ti.App.Properties.hasProperty('userId')?true:false;
};

Utils.loggedInUserId = function() {
	// return 20;
	return Ti.App.Properties.getString('userId');
};

Utils.isAppOpenedForTheFirstTime = function() {
	if(Ti.App.Properties.hasProperty('isAppOpenedForTheFirstTime')) {
		return Ti.App.Properties.getBool('isAppOpenedForTheFirstTime');
	}
	return true;
};


Utils.setAppOpenedForTheFirstTime = function(bool) {
	Ti.App.Properties.setBool('isAppOpenedForTheFirstTime', bool);
};


Utils.ellipsis = function(str, maxLength) {
	if(str.length > maxLength) {
		return str.substr(0, maxLength - 3) + '...';
	}
	return str;
};


Utils.isUserRegisteredForPushNotifications = function() {
	if(Ti.App.Properties.hasProperty('isUserRegisteredForPushNotifications')) {
		return Ti.App.Properties.getBool('isUserRegisteredForPushNotifications');
	}
	return false;
};

Utils.setTiDeviceToken = function(token){
	if(token){
		Ti.App.Properties.setString('TiDeviceToken',token);
	}
	else{
		Ti.App.Properties.removeProperty('TiDeviceToken');
	}
};

Utils.getTiDeviceToken = function(){
	 var token = Ti.App.Properties.getString('TiDeviceToken','');
	 // Ti.API.info(constant.APP + " retrieved TiDeviceToken: [" + token + "]");
	 return token;
};

Utils.hasUserVerifiedTheCode = function(bool, userId, verificationCode) {
	if(bool == undefined) {
		return Ti.App.Properties.hasProperty('hasUserVerifiedTheCode');
	}
	
	if(bool) {
		Ti.App.Properties.removeProperty('hasUserVerifiedTheCode');
		Ti.App.Properties.removeProperty('verificationCode');
		Ti.App.Properties.removeProperty('userIdToVerify');
	}
	else {
		Ti.App.Properties.setBool('hasUserVerifiedTheCode', true);
		Ti.App.Properties.setInt('verificationCode', verificationCode);
		Ti.App.Properties.setInt('userIdToVerify', userId);
	}
	
	// 	verificationCode property if for temporary use. 
};

Utils.getProfilePicPlaceHolder = function() {
	return '/images/common/profile-icon.png';
};

Utils.getProfileImageURL = function(URL) {
	if(URL && URL.trim() != '') {
		return URL.indexOf('http')==-1?(constant.DOMAIN+URL):URL;
	}
	return '/images/common/profile-icon.png';
};

Utils.getFullURL = function(URL) {
	try {
		if(URL && URL.trim() != '') {
			return URL.indexOf('http')==-1?(constant.DOMAIN+URL):URL;
		}
	}
	catch(e) {
		return '/images/common/profile-icon.png';
	}
	return '/images/common/profile-icon.png';
};

Utils.getNotificationImageURL = function(URL) {
	try {
		if(URL && URL.trim() != '') {
			return URL.indexOf('http')==-1?(constant.DOMAIN+URL):URL;
		}
	}
	catch(e) {
		return '/images/common/notification-icon.png';
	}
	return '/images/common/notification-icon.png';
};

Utils.getStyleFeedUrl = function(URL){
	try {
		if(URL && URL.trim() != '') {
			return URL.indexOf('http')==-1?(constant.DOMAIN+URL):URL;
		}
	}
	catch(e) {
		// return '/images/common/notification-icon.png';
		return null;
	}
};

Utils.getBrands = function(callback) {
	// var data = [];
	// for(var i=(pageIndex*20)+1; i<((pageIndex*20)+1)+20; i++) {
		// data.push({
			// brandId: i,
			// name: 'brand ' + i
		// });
	// }
	// callback && callback(data);
	// return;
	
	var _requestArgs = {
        showLoader: true,
        url: 'brand.php',
        method: 'post',
    	serverArgs: {
        	action: 'getAllBrands',
        	userId: Utils.loggedInUserId(),
        	// pageIndex: pageIndex
       	},
       	cache: true
    };
    
    /*
     * Hit web service
     */
    HttpClient.getResponse({
    	requestArgs: _requestArgs,
    	success: function(response) {
			callback && callback(response.data);   
    	},
    	error: function(error) {
            var alertDialog = UI.createAlertDialog({
                title: error.errorTitle, 
                message: error.errorMessage
            });
            alertDialog.show();
            alertDialog = null;
    	}
    });
};

Utils.getCategories = function(callback) {
	var _requestArgs = {
        showLoader: true,
        url: 'product.php',
        method: 'post',
    	serverArgs: {
        	action: 'getCategories'
       	},
       	cache: true
    };
    
    /*
     * Hit web service
     */
    HttpClient.getResponse({
    	requestArgs: _requestArgs,
    	success: function(response) {
            callback && callback(response.data);
    	},
    	error: function(error) {
            var alertDialog = UI.createAlertDialog({
                title: error.errorTitle, 
                message: error.errorMessage
            });
            alertDialog.show();
            alertDialog = null;
    	}
    });
};


Utils.getSubCategories = function(categoryId, callback) {
	var _requestArgs = {
        showLoader: true,
        url: 'product.php',
    	method: 'post',
    	serverArgs: {
        	action: 'getSubcategories',
        	categoryId: categoryId
       	},
       	cache: true
    };
    
    /*
     * Hit web service
     */
    HttpClient.getResponse({
    	requestArgs: _requestArgs,
    	success: function(response) {
            callback && callback(response.data);
    	},
    	error: function(error) {
            var alertDialog = UI.createAlertDialog({
                title: error.errorTitle, 
                message: error.errorMessage
            });
            alertDialog.show();
            alertDialog = null;
    	}
    });
};

Utils.getCommisionPercentage = function() {
	return 20;
};

Utils.getHandlingFees = function() {
	return 10;
};


Utils.areDifferent = function(objSource, objDestination) {
	for(var _key in objSource) {
		if(objDestination.hasOwnProperty(_key) && objDestination[_key] != objSource[_key]) {
			return true;
		}
	}	
	return false;
};


Utils.setPushItemId = function(itemId) {
	_pushItemId = itemId;
};


Utils.resetPushItemId = function() {
	_pushItemId = 0;
};


Utils.getPushItemId = function() {
	if(_pushItemId == undefined || _pushItemId == null) {
		return 0;
	}
	return _pushItemId;
};


Utils.toggleNotification = function() {
	Ti.API.info(constant.APP + " $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ TOGGLING PUSHNOTIFICATIONS ###############################");
	if(Ti.App.Properties.hasProperty('notifications')) {
		Ti.API.info(constant.APP + " $$$$$$$$$$$$$$$$$$$$$$$$$$ FOUND NOTIFICATION BOOL $$$$$$$$$$$$$$$$$$$$$$$$$$");
		Ti.App.Properties.setBool('notifications', !Ti.App.Properties.getBool('notifications'));
		if(Ti.App.Properties.getBool('notifications')) {
			Ti.API.info(constant.APP + " $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ REGISTERING PUSHNOTIFICATIONS ###############################");
			Ti.App.fireEvent('registerForPushNotification');
		}
		else {
			Ti.API.info(constant.APP + " $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ DEREGISTERING PUSHNOTIFICATIONS ###############################");
			Ti.App.fireEvent('deRegisterForPushNotification');
		}
	}
	else {
		Ti.App.Properties.setBool('notifications', false);
	}
};


Utils.isNotificationOn = function() {
	if(Ti.App.Properties.hasProperty('notifications')) {
		return Ti.App.Properties.getBool('notifications');
	}
	return true;
};


Utils.getStates = function(callback) {
	if(Cache.isTable('statesAndCities')) {
		var _states = Cache.execute('select distinct(state) from statesAndCities order by state');
		Utils._.isFunction(callback) && callback(_states);
	}
	else {
		var _statesAndCities = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'cities-states.txt');
		_statesAndCities = _statesAndCities.read().text.split('\n');
		
		Cache.execute('create table if not exists statesAndCities (state text, city text)');
		
		var _queries = [];
		
		for(var i = 0; i < _statesAndCities.length; i++) {
			var _arr = _statesAndCities[i].split(',');
			_queries.push('insert into statesAndCities values ("' + _arr[0] + '", "' + _arr[1] + '")');
		}
		
		Cache.batchInsert(_queries, function() {
			var _states = Cache.execute('select distinct(state) from statesAndCities order by state');
			Utils._.isFunction(callback) && callback(_states);
		});
	}
};


Utils.getCities = function(state, callback) {
	if(state == '' || state == undefined || state == null) {
		var _cities = Cache.execute('select city from statesAndCities order by city');
	}
	else {
		var _cities = Cache.execute('select city from statesAndCities where LOWER(state) = LOWER("' + state + '") order by city');
	}
	Utils._.isFunction(callback) && callback(_cities);
};


Utils.shortenUrl = function() {
	var _httpClient = Ti.Network.createHTTPClient();
	_httpClient.setTimeout = (60 * 2) * 1000; 		
	_httpClient.open('POST', 'https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyCJaX1CA4ZuKXWhDJegOLaLdiaqkEt-pTk');
	_httpClient.setRequestHeader('Content-Type', 'application/json');
	_httpClient.send({
		longUrl: "http://www.google.com/"
	});
	_httpClient.onload = function() {
		alert(this.responseText);
		this.httpClient = null;
	}; 
	_httpClient.onerror = function(e) {
		alert(e);
		this.httpClient = null;    
	};
};

module.exports = Utils;

